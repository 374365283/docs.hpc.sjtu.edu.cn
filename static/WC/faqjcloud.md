[云平台常见问题 ](https://docs.hpc.sjtu.edu.cn/WC/faqjcloud.html)/    [高性能计算（含AI）平台常见问题](https://docs.hpc.sjtu.edu.cn/WC/faqhpc&ai.html)
#<center>云平台常见问题</center>
-------------

## 一、一般问题（账号、充值、项目管理、用户协作）
### 如何开通账号？
个人账号：
有 jAccount 账号的用户无需重新注册云平台账号，可直接登录。
无 jAccount 账号的用户需在平台注册，填写注册信息，待管理员审核通过后可登录使用。

集体账号：
办理流程参见 [https://net.sjtu.edu.cn/wlfw/jaccountzh.htm](https://net.sjtu.edu.cn/wlfw/jaccountzh.htm)

### 如何参与到其他用户的指定项目中一起工作？
邀请人录“控制台”，点击“用户协作”-“邀请用户”，输入被邀请人的用户名或邮箱、以及权限，确认后系统会自动给被邀请人发送邀请邮件，被邀请人接受邀请后，即可加入到邀请人的指定项目中。

### 哪里查询配额？如何提高配额？
用户登录“控制台”后，在“概况”页右侧可以查看当前项目的配额概况。当因配额使用完导致无法继续申请某类资源时，可点击右上角“申请扩展配额”，选择需要申请的资源项，填写需要申请扩展的数量和申请原因，确认后该申请会发送至平台管理员审核，待审核通过后即可。

## 二、云主机服务
###云主机密码是什么？Web VNC登陆主机时需要。
如果创建云主机时，选择的是“密钥登陆”，那么云主机的密码是创建时使用镜像的默认密码，在该镜像的详情页可以找到该默认密码。 如果选择的是“密码登陆”，那么云主机的密码就是您创建时输入的密码。
另外，Linux 系统的云主机，创建时如果选择用密钥方式登录，不会有默认的密码。
所有操作系统类型的云主机，创建时如果选择用密码方式登录，云主机密码即为创建时输入的密码。

### 如何实现免密码登陆？
可使用密钥(Key Pair)通过 SSH 登陆 Linux 主机。如果是 Linux / Mac 用户，推荐导入已有的公钥。如果是 Windows 用户，推荐用平台生成的密钥。详情参考密钥登录云主机。

云主机无法激活问题？
登录[http://mvls.sjtu.edu.cn/index.php](http://mvls.sjtu.edu.cn/index.php) 查看：问题列表 - 激活问题。

### 为何无法远程连接到windows类型的云主机？
如只有校外远程windows类型云主机异常，需要在云主机操作系统中修改默认的3389远程连接端口为任意指定的非占用端口，同时修改关联的安全组规则。
如校内无法远程访问windows类型云主机，请检查安全组配置规则。
### 无法远程连接linux云主机？
Iptables配置错误
安全组规则设置错误
### 云主机上部署的应用无法访问？
查看应用是否启动，iptables配置是否正确，安全组规则是否配置正确。
## 三、块存储服务
###删除云主机后，会对挂载在该云主机上的云硬盘数据产生什么影响？
因为云硬盘和云主机是相互独立的，所以保存在云硬盘的数据不受云主机寿命的影响。

### 应用程序的I/O大小是否影响从云硬盘获得的IOPS和吞吐率。
是。对于指定容量云硬盘的 IOPS 取决于你应用程序读写操作的 I/O 大小。当块存储大于 32KB 时，块存储越大，IOPS 越低。

哪些因素会影响云硬盘的性能？
有几个因素会影响云硬盘的性能：

新创建云硬盘的 IOPS 可能会较低，等热身一段时间之后， IOPS 会达到SLA 的水平。
每次创建快照后，云硬盘的 IOPS 会降低，等热身一段时间之后， IOPS 会重新达到 SLA 的水平。
你的应用程序是否发送了足够的 I/O 请求，可通过查看云硬盘的队列深度来确认。
### 是否需要卸载云硬盘才能创建快照？
否。可以在云硬盘挂载至云主机时创建快照。但快照只能保存已写入云硬盘的数据，不一定包含应用程序或操作系统在本地缓存的数据。为确保挂载到云主机上的云硬盘获得一致性的快照，建议在云主机上执行 sync 操作，或者先卸载云硬盘，再创建快照。
## 四、对象存储服务
### 对象存储适合谁用？
对象存储适合于社区、多媒体分享站、电子商务等各类形式规模的网站站长， APP 应用、软件应用开发者以及大规模数据存储需求的用户使用。

### 对象存储适合存什么？
对象存储适合存储论坛网站与软件应用中的附件、高清图片、音视频、备份文件等，及各种 APP 应用、多终端同步软件、网盘下载站的文件存储。

### 对象存储容量是多少？
对象存储总存储容量不限制，单个存储空间容量也不限制。

### 对象存储文件用户删除后能不能恢复？
不能。对象存储文件被用户删除后不能恢复。

### 对象存储中存放文件对访问速度的影响？
在一般的文件系统中，当单个目录下存放的文件较多的时候是会影响文件的读写速度。但是在对象存储中，目录仅仅是一个逻辑上的概念，所以并不影响该文件的访问速度。

### 对象存储中的目录/文件夹概念？
对象存储中的目录/文件夹的概念仅仅是逻辑概念，一个文件的目录仅仅是该 object 对象的 key 值的前缀。
##五、网络服务
### 如何修改云主机的 IP 地址
目前交大云平台不提供普通用户修改云主机内网 IP 的功能。

### 如何为云平台公网 IP 申请绑定域名？
参考：[https://net.sjtu.edu.cn/wlfw/ym.htm](https://net.sjtu.edu.cn/wlfw/ym.htm) 服务介绍

### 为何外网无法访问 80，8080 端口？
学校网络边界会在特殊时期对该类端口进行屏蔽。
## 六、数据库服务
##如何重置数据库管理平台登陆密码？
目前交大云平台不提供用户直接修改重置数据库管理平台登录密码，需联系平台管理员进行重置。

## 为何数据库绑定浮动 IP 后，外网访问不正常？
学校网络边界会在特殊时期对该类端口进行屏蔽，不建议为数据库绑定浮动 IP。

## 数据库发生故障后，如何处理？
请勿直接删除数据库实例，及时联系平台管理员。直接删除数据库实例会删除存储在本地与对象存储中的备份文件，无法完成恢复。
## 七、容器服务
### 什么是容器平台？
容器平台旨在通过对交大云平台资源的合理编排，为用户提供快速、可用的 Kubernetes （以下简称 k8s ）容器编排服务，免除用户手动在虚拟机上安装 k8s 服务的烦恼。此外容器平台还抽象了完整容器集群的生命周期，因此用户可以通过容器平台创建、更新、删除容器集群。

### 容器平台常见概念释义
* 集群（Cluster），一个集群可以认为是虚拟机、网络、卷等云平台资源的组合，当一个集群被成功创建后，k8s服务已经在虚拟机中运行，用户登录集群主节点后在集群上编排容器。
* 集群模板（ClucsterTemplate）顾名思义，集群模板定义了集群配置：CPU 核数、内存大小、虚拟机数量等。在创建集群前必须先创建一个集群模板。
* 本地镜像仓库，在创建集群时虚拟机需要获取 k8s 服务所需的容器镜像，如 etcd, flannel, kube-apiserver, kubelet 等。默认情况下会从 dockerhub 上的公共镜像仓库下载，如想加快下载速度时可以指定本地镜像仓库。
### 为什么容器平台的节点只允许密钥登录？
由于容器平台的虚拟机可能会挂载浮动 IP 对外暴露，为保证集群安全性，集群节点只能以 fedora 用户并使用创建集群模板时指定的密钥登录。

### 集群创建或删除时失败该怎么办？
1.集群创建失败的常见原因如下：
* 配额不足，确认项目有足够的集群配额、云主机配额、安全组配额、私有网络配额和云硬盘配额。
* DNS服务配置不正确，在创建集群模板可以为集群指定DNS服务地址，推荐使用 202.120.2.100。
* k8s 版本不正确，k8s 版本可以通过 kube_tag=v1.xx.xx 标签指定，目前支持 v1.11.x 版本的 k8s，推荐 v1.11.2。
2.集群删除失败常见原因：
* 确认集群创建出的资源没有被项目内其他资源占用，最常见情况是用户自己创建的云主机所在的集群私有网络中，导致网络无法删除
* 多次发起删除集群请求，当处于 DLEETE_INPROGRESS 状态时，再次发起删除请求会导致删除过程取消，删除失败，可以过一段时间后再次发起删除集群请求。
## 八安全服务
### 怎么判断自己服务器上是否已经安装天眼云镜的 Agent？
* 对于 Linux 系统：
在服务器上执行命令 ps –ef | grep titan , 如果出现下图两个进程，则表示当前机器已经安装天眼云镜 Agent。

* 对于 Windows 系统：
打开系统任务管理器，在进程信息中如果可以看到 TitanAgent.exe 和 TitanMonitor.exe 进程，则表示系统已经安装天眼云镜 Agent。

### 怎么删除天眼云镜的Agent？
* 对于 Linux 系统：
在服务器上以 roo t账号执行命令sh /titan/agent/install_agent.sh disclean， 如果输出下图内容，则表示删除成功。

* 对于 Windows 系统：
在“控制面板”-“程序和功能”中找到 TitanAgent 字样的程序，然后右键正常卸载即可。

### 怎么手动安装天眼云镜 Agent？
* 对于 Linux 系统：
如果您之前删除过天眼云镜的 Agent，后续可以通过手动安装的方式再次安装 Agent。首先登录天眼云镜管理后台（从交大云平台管理界面跳转登录），选择“系统管理”-“Agent安装”，然后设置“主机信息“，最后点击“生成命令”，即可直接生成安装命令。最后直接在服务器以 root 用户运行上步生成的该命令。如果输出如下图所示，则表示安装成功。

* 对于 Windows 系统：
如果您之前删除过天眼云镜的 Agent，后续可以通过手动安装的方式再次安装 Agent。首先登录天眼云镜管理后台界面，选择“系统管理”-“Agent安装”，然后设置“主机信息‘后就可以直接生成安装命令，最后直接在服务器以 Administrator 用户运行该命令。如果默认没有报错输出，则表示安装成功。
## 九科研应用服务
### 什么是科研应用服务？
科研应用服务是基于交大云平台的科研增值服务功能。交大云针对针对各院系学术研究过程中对计算资源的使用需求，为各学科提供常用的计算密集型科研软件的运行平台，创建所需的科研软件计算环境用户不再需要从头一步步的申请、采购、安装、配置，而只需要简单在 web 页填写 CPU、内存等资源配置需求，在 20 分钟内就可以构建出符合需求的环境。典型的科研应用服务包括：Abaqus、拓扑优化、LAMMPS、OpenFOAM 等。

### 创建一个科研应用需要多长时间？
视集群规模而定。通常单机版的创建时间不超过 5 分钟，较大规模的并行计算集群在 20 分钟以内可以创建完成。

### 创建科研应用后，如何使用？
所创建科研应用的运行环境通过云主机来承载，所以其使用和云主机的使用方式是一致的。既可以通过 WebVNC 控制台登录云主机来直接使用，也可以通过 ssh 方式远程登录。每种科研应用各自需要特殊注意的地方，会在用户登录后的欢迎界面中特别提示。

### 科研应用的集群版，应该登录哪台主机进行操作？
登录“控制台”，点击“科研应用” – “我的应用”，可以看到集群 master 主机的 IP 地址，直接登录该主机即可。其它 slave 从机只用于并行计算的协同，只需要确保开启，不需要登录。

### 拓扑优化集群版的工作目录有哪些要求？
由于拓扑优化并行计算集群需要在文件的层面上进行协同，包括计算程序和数据文件的输入输出在内的工作目录，需要在集群内共享的 /topopt 及其子目录下进行。

## 十、工单
### 如何提交工单？
登录“控制台“，点击”运维与管理“ -“工单”按钮进入工单详情页，点击“创建工单”，在弹出的对话框中输入工单标题和具体的工单内容描述，也可选择 TXT，JPG，JPEG 和 PNG 格式的附件进行上传，然后点击“确认”按钮，即可完成工单的提交。

### 工单号是什么，从哪里知道自己的工单号？
工单号是工单的 ID 编号，命名规则为 Ticket_数字（数字每次加1）。

### 工单每天提交的次数有限制吗？
没有

